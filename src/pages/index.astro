---
import Layout from "../layouts/main.astro";
import { HeroSection } from "../components/HeroSection";
import { NewsCard } from "../components/NewsCard";
import { EventCard } from "../components/EventCard";
import { newsData } from "../data/news";
import { eventsData } from "../data/events";

// Get latest 3 news
const latestNews = newsData.slice(0, 3);

// Get upcoming events (sorted by date)
const upcomingEvents = [...eventsData]
  .sort((a, b) => a.date.localeCompare(b.date))
  .slice(0, 3);
---

<Layout>
  <!-- Hero Section -->
  <HeroSection client:load />

  <!-- News Section -->
  <section class="py-20 bg-muted/30">
    <div class="container mx-auto max-w-6xl px-4">
      <div class="mb-12 text-center">
        <h2 class="text-4xl font-black text-foreground sm:text-5xl">
          ActualitÃ©s <span class="inline-block animate-float">ğŸ“°</span>
        </h2>
        <p class="mt-4 text-lg text-muted-foreground font-medium">
          Les derniÃ¨res nouvelles de l'association !
        </p>
      </div>

      <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 stagger-children">
        {
          latestNews.map((news) => (
            <NewsCard
              client:load
              title={news.title}
              excerpt={news.excerpt}
              date={news.dateFormatted}
              slug={news.slug}
            />
          ))
        }
      </div>

      <div class="mt-12 text-center">
        <a
          href="/actualites"
          class="inline-flex items-center gap-2 text-base font-bold text-primary hover:underline bounce-click"
        >
          Voir toutes les actualitÃ©s
          <span>â†’</span>
        </a>
      </div>
    </div>
  </section>

  <!-- Events Section -->
  <section class="py-20">
    <div class="container mx-auto max-w-6xl px-4">
      <div class="mb-12 text-center">
        <h2 class="text-4xl font-black text-foreground sm:text-5xl">
          Ã‰vÃ©nements Ã  venir <span class="inline-block animate-drum">ğŸ‰</span>
        </h2>
        <p class="mt-4 text-lg text-muted-foreground font-medium">
          Rejoignez-nous pour des moments inoubliables !
        </p>
      </div>

      <div class="space-y-6 max-w-4xl mx-auto stagger-children">
        {
          upcomingEvents.map((event) => (
            <a href={`/evenements/${event.slug}`} class="block">
              <EventCard
                client:load
                title={event.title}
                date={event.date}
                time={event.time}
                location={event.location}
                category={event.category}
                description={event.description}
              />
            </a>
          ))
        }
      </div>

      <div class="mt-12 text-center">
        <a
          href="/evenements"
          class="inline-flex items-center gap-2 text-base font-bold text-primary hover:underline bounce-click"
        >
          Voir tous les Ã©vÃ©nements
          <span>â†’</span>
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section
    class="py-20 bg-gradient-to-r from-primary via-secondary to-primary text-white relative overflow-hidden"
  >
    <!-- Decorative circles -->
    <div
      class="absolute top-10 left-10 w-20 h-20 rounded-full bg-white/10 animate-float"
    >
    </div>
    <div
      class="absolute bottom-10 right-10 w-16 h-16 rounded-full bg-white/10 animate-float"
      style="animation-delay: 1s;"
    >
    </div>
    <div
      class="absolute top-1/2 right-1/4 w-12 h-12 rounded-full bg-white/5 animate-float"
      style="animation-delay: 0.5s;"
    >
    </div>

    <div class="container relative z-10 mx-auto max-w-4xl px-4 text-center">
      <h2 class="text-4xl font-black sm:text-5xl">PrÃªt Ã  danser ? ğŸ’ƒğŸ¿ğŸ•ºğŸ¿</h2>
      <p class="mt-6 text-xl opacity-90 font-medium">
        Rejoignez notre communautÃ© et dÃ©couvrez la joie de la danse africaine !
        <br />Premier cours d'essai <strong>GRATUIT</strong> ğŸ
      </p>
      <div
        class="mt-10 flex flex-col items-center justify-center gap-4 sm:flex-row"
      >
        <a
          href="/contact"
          class="inline-flex h-14 items-center justify-center rounded-xl bg-white px-10 text-base font-black text-primary transition-transform hover:scale-105 active:scale-95"
        >
          Nous contacter ğŸ“§
        </a>
        <a
          href="/cours"
          class="inline-flex h-14 items-center justify-center rounded-xl border-3 border-white/30 px-10 text-base font-bold transition-transform hover:scale-105 hover:bg-white/10 active:scale-95"
        >
          Voir les cours ğŸ“…
        </a>
      </div>
    </div>
  </section>
</Layout>
