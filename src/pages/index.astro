---
import Layout from "../layouts/main.astro";
import { HeroSection } from "../components/HeroSection";
import { NewsCard } from "../components/NewsCard";
import { EventCard } from "../components/EventCard";
import { newsData } from "../data/news";
import { eventsData, getUpcomingEvents } from "../data/events";

// Get latest 3 news
const latestNews = newsData.slice(0, 3);

// Get upcoming events (sorted by date)
const upcomingEvents = [...eventsData]
  .sort((a, b) => a.date.localeCompare(b.date))
  .slice(0, 3);
---

<Layout>
  <!-- Hero Section -->
  <HeroSection client:load />

  <!-- News Section -->
  <section class="py-16 bg-muted/30">
    <div class="container mx-auto max-w-6xl px-4">
      <div class="mb-10 text-center">
        <h2 class="text-3xl font-bold text-foreground sm:text-4xl">
          Actualités
        </h2>
        <p class="mt-3 text-muted-foreground">
          Les dernières nouvelles de l'association
        </p>
      </div>

      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {
          latestNews.map((news) => (
            <NewsCard
              title={news.title}
              excerpt={news.excerpt}
              date={news.dateFormatted}
              slug={news.slug}
            />
          ))
        }
      </div>

      <div class="mt-10 text-center">
        <a
          href="/actualites"
          class="inline-flex items-center text-sm font-medium text-primary hover:underline"
        >
          Voir toutes les actualités
          <svg
            class="ml-1 h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Events Section -->
  <section class="py-16">
    <div class="container mx-auto max-w-6xl px-4">
      <div class="mb-10 text-center">
        <h2 class="text-3xl font-bold text-foreground sm:text-4xl">
          Événements à venir
        </h2>
        <p class="mt-3 text-muted-foreground">
          Rejoignez-nous lors de nos prochains événements
        </p>
      </div>

      <div class="space-y-4 max-w-4xl mx-auto">
        {
          upcomingEvents.map((event) => (
            <a href={`/evenements/${event.slug}`} class="block">
              <EventCard
                title={event.title}
                date={event.date}
                time={event.time}
                location={event.location}
                category={event.category}
                description={event.description}
              />
            </a>
          ))
        }
      </div>

      <div class="mt-10 text-center">
        <a
          href="/evenements"
          class="inline-flex items-center text-sm font-medium text-primary hover:underline"
        >
          Voir tous les événements
          <svg
            class="ml-1 h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-primary text-primary-foreground">
    <div class="container mx-auto max-w-4xl px-4 text-center">
      <h2 class="text-3xl font-bold sm:text-4xl">Prêt à danser ?</h2>
      <p class="mt-4 text-lg opacity-90">
        Rejoignez notre communauté et découvrez la joie de la danse africaine.
        Premier cours d'essai gratuit !
      </p>
      <div
        class="mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row"
      >
        <a
          href="/contact"
          class="inline-flex h-11 items-center justify-center rounded-md bg-background px-8 text-sm font-medium text-foreground shadow transition-colors hover:bg-background/90"
        >
          Nous contacter
        </a>
        <a
          href="/cours"
          class="inline-flex h-11 items-center justify-center rounded-md border border-primary-foreground/20 px-8 text-sm font-medium transition-colors hover:bg-primary-foreground/10"
        >
          Voir les horaires
        </a>
      </div>
    </div>
  </section>
</Layout>
